<mvc:View controllerName="iifcl.cml.cmlmisapp.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:f="sap.f"
    xmlns:card="sap.f.cards" xmlns:core="sap.ui.core" xmlns:viz="sap.viz.ui5.controls"
    xmlns:vizData="sap.viz.ui5.data" xmlns:vizFeeds="sap.viz.ui5.controls.common.feeds">

    <App id="mainapp">
        <Page id="rootPage" showHeader="false" class="appBackground">
            <content>
                <HBox id="MainLayoutHBox" width="100%" height="100%" renderType="Bare" fitContainer="true">

                    <VBox id="SidebarBox" width="{= ${view>/sidebarCollapsed} ? '0px' : '280px' }" 
                          visible="{= !${view>/sidebarCollapsed} }" class="customSidebar">
                        <items>
                            <HBox id="_IDGenHBox" alignItems="Center" class="sapUiMediumMarginTop sapUiMediumMarginBegin sapUiSmallMarginBottom">
                                <core:Icon id="_IDGenIcon" src="sap-icon://bbyd-dashboard" size="1.5rem" color="white" class="sapUiTinyMarginEnd"/>
                                <Title id="_IDGenTitle" text="MIS WORKBENCH" level="H3" class="sidebarTitle"/>
                            </HBox>
                            <List id="_IDGenList" items="{reports>/reports}" mode="SingleSelectMaster" selectionChange=".onReportSelect" backgroundDesign="Transparent" showSeparators="None">
                                <StandardListItem id="_IDGenStandardListItem" title="{reports>title}" type="Active" icon="sap-icon://chart-vertical-bar" class="customListItem"/>
                            </List>
                        </items>
                    </VBox>

                    <VBox id="ContentBox" width="100%" class="sapUiSmallMarginBegin sapUiSmallMarginEnd">
                        <items>
                            <OverflowToolbar id="_IDGenOverflowToolbar" class="customHeaderToolbar sapUiSmallMarginTop">
                                <Button id="_IDGenButton" icon="sap-icon://menu2" press=".onToggleSidebar" type="Transparent"/>
                                <Title id="_IDGenTitle1" text="{view>/currentReportTitle}" level="H2" class="pageTitle sapUiSmallMarginBegin"/>
                                <ToolbarSpacer id="_IDGenToolbarSpacer"/>
                                
                                <Label id="_IDGenLabel" text="Period:" design="Bold" class="headerLabel"/>
                                <SegmentedButton id="_IDGenSegmentedButton" selectedKey="{view>/selectedBucketKey}" selectionChange=".onBucketToggle" class="customSegmented">
                                    <items>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem" key="CY" text="{view>/periodLabelCY}"/>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem1" key="PY" text="{view>/periodLabelPY}"/>
                                    </items>
                                </SegmentedButton>

                                <Label id="_IDGenLabel1" text="Metric:" design="Bold" class="headerLabel sapUiSmallMarginBegin"/>
                                <SegmentedButton id="_IDGenSegmentedButton1" selectedKey="{view>/selectedMetricKey}" selectionChange=".onMetricToggle" class="customSegmented">
                                    <items>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem2" key="gross" text="Gross"/>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem3" key="disb" text="Disb."/>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem4" key="net" text="Net"/>
                                        <SegmentedButtonItem id="_IDGenSegmentedButtonItem5" key="os" text="O/S"/>
                                    </items>
                                </SegmentedButton>
                            </OverflowToolbar>

                            <HBox id="_IDGenHBox1" width="100%" justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginTop sapUiTinyMarginBottom">
                                <items>
                                    <HBox id="_IDGenHBox2" alignItems="Center">
                                        <core:Icon id="_IDGenIcon1" src="sap-icon://calendar" size="1rem" color="#3182ce" class="sapUiTinyMarginEnd"/>
                                        <Text id="_IDGenText" text="Period: {view>/periodLabelActive}" class="infoStripText sapUiMediumMarginEnd"/>
                                        <core:Icon id="_IDGenIcon2" src="sap-icon://bar-chart" size="1rem" color="#3182ce" class="sapUiTinyMarginEnd"/>
                                        <Text id="_IDGenText1" text="Viewing: {view>/activeMetricLabel}" class="infoStripText"/>
                                    </HBox>
                                </items>
                            </HBox>

                            <IconTabBar id="tabBar" select=".onTabSelect" expandable="false" class="sapUiNoContentPadding">
                                <items>
                                    <IconTabFilter id="_IDGenIconTabFilter" key="data" text="Data Table" icon="sap-icon://table-view">
                                        <Table id="_IDGenTable" items="{view>/rows}" class="customCard sapUiMediumMarginTop">
                                            <columns>
                                                <Column id="_IDGenColumn"><Text id="_IDGenText2" text="{view>/col1Header}"/></Column>
                                                <Column id="_IDGenColumn1"><Text id="_IDGenText3" text="{view>/col2Header}"/></Column>
                                                <Column id="_IDGenColumn2" visible="{view>/showCol3}"><Text id="_IDGenText4" text="{view>/col3Header}"/></Column> 
                                                <Column id="_IDGenColumn3" hAlign="End"><Text id="_IDGenText5" text="Projects"/></Column>
                                                <Column id="_IDGenColumn4" hAlign="End"><Text id="_IDGenText6" text="Proj. Cost (Cr)"/></Column>
                                                <Column id="_IDGenColumn5" hAlign="End"><Text id="_IDGenText7" text="{view>/activeMetricLabel}"/></Column>
                                            </columns>
                                            <items>
                                                <ColumnListItem id="_IDGenColumnListItem">
                                                    <cells>
                                                        <Text id="_IDGenText8" text="{view>DisplayCol1}"/>
                                                        <Text id="_IDGenText9" text="{view>DisplayCol2}"/>
                                                        <Text id="_IDGenText10" text="{view>BorrowerGroupName}"/>
                                                        <ObjectNumber id="_IDGenObjectNumber" number="{view>ProjectsCY}"/>
                                                        <ObjectNumber id="_IDGenObjectNumber1" number="{path: 'view>ProjectCostCY', formatter: '.formatter.metric'}" unit="Cr"/>
                                                        <ObjectNumber id="_IDGenObjectNumber2" number="{path: 'view>CurrentMetric', formatter: '.formatter.metric'}" unit="Cr" state="Information"/>
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>
                                    </IconTabFilter>

                                    <IconTabFilter id="_IDGenIconTabFilter1" 
    key="analytics" 
    text="Analytics" 
    icon="sap-icon://line-chart">
                                        <VBox id="_IDGenVBox" class="sapUiMediumMarginTop">
                                            <items>
                                                <HBox id="_IDGenHBox3" width="100%" height="160px" class="sapUiSmallMarginBottom">
                                                    <items>
                                                        <f:Card id="_IDGenCard" class="kpiCard sapUiSmallMarginEnd" width="280px">
                                                            <f:content>
                                                                <VBox id="_IDGenVBox1" height="140px" class="sapUiSmallMargin" justifyContent="Center">
                                                                    <items>
                                                                        <Text id="_IDGenText11" text="TOTAL PROJECTS" class="subtleTitle"/>
                                                                        <ObjectNumber id="_IDGenObjectNumber3" number="{view>/totalProjects}" class="bigKpiNumber" state="Success"/>
                                                                    </items>
                                                                </VBox>
                                                            </f:content>
                                                        </f:Card>
                                                        <f:Card id="_IDGenCard1" class="kpiCard sapUiSmallMarginEnd" width="280px">
                                                            <f:content>
                                                                <VBox id="_IDGenVBox2" height="140px" class="sapUiSmallMargin" justifyContent="Center">
                                                                    <items>
                                                                        <Text id="_IDGenText12" text="PROJECT COST (SUM)" class="subtleTitle"/>
                                                                        <ObjectNumber id="_IDGenObjectNumber4" number="{view>/totalProjectCost}" unit="Cr" class="bigKpiNumber"/>
                                                                    </items>
                                                                </VBox>
                                                            </f:content>
                                                        </f:Card>
                                                        <f:Card id="_IDGenCard2" class="kpiCard" width="280px">
                                                            <f:content>
                                                                <VBox id="_IDGenVBox3" height="140px" class="sapUiSmallMargin" justifyContent="Center">
                                                                    <items>
                                                                        <Text id="_IDGenText13" text="{view>/activeMetricLabel}" class="subtleTitle"/>
                                                                        <ObjectNumber id="_IDGenObjectNumber5" number="{view>/totalMetric}" unit="Cr" class="bigKpiNumber" state="Information"/>
                                                                    </items>
                                                                </VBox>
                                                            </f:content>
                                                        </f:Card>
                                                    </items>
                                                </HBox>

                                                <l:Grid id="_IDGenGrid" defaultSpan="L6 M12 S12" hSpacing="1" vSpacing="1">
                                                    <f:Card id="_IDGenCard3" class="chartCard">
                                                        <f:header><card:Header id="_IDGenHeader" title="Contribution Trend" iconSrc="sap-icon://vertical-bar-chart"/></f:header>
                                                        <f:content>
                                                            <viz:VizFrame id="devGroupChart" vizType="column" height="400px" width="100%">
                                                                <viz:dataset>
                                                                    <vizData:FlattenedDataset id="_IDGenFlattenedDataset" data="{view>/rows}">
                                                                        <vizData:dimensions><vizData:DimensionDefinition id="_IDGenDimensionDefinition" name="Dim" value="{view>GenericDim}"/></vizData:dimensions>
                                                                        <vizData:measures><vizData:MeasureDefinition id="_IDGenMeasureDefinition" name="Val" value="{view>CurrentMetric}"/></vizData:measures>
                                                                    </vizData:FlattenedDataset>
                                                                </viz:dataset>
                                                                <viz:feeds>
                                                                    <vizFeeds:FeedItem id="_IDGenFeedItem1" uid="categoryAxis" type="Dimension" values="Dim"/>
                                                                    <vizFeeds:FeedItem id="_IDGenFeedItem2" uid="valueAxis" type="Measure" values="Val"/>
                                                                </viz:feeds>
                                                            </viz:VizFrame>
                                                        </f:content>
                                                    </f:Card>
                                                    <f:Card id="_IDGenCard4" class="chartCard">
                                                        <f:header><card:Header id="_IDGenHeader1" title="Distribution Share" iconSrc="sap-icon://pie-chart"/></f:header>
                                                        <f:content>
                                                            <viz:VizFrame id="shareChart" vizType="donut" height="400px" width="100%">
                                                                <viz:dataset>
                                                                    <vizData:FlattenedDataset id="_IDGenFlattenedDataset1" data="{view>/rows}">
                                                                        <vizData:dimensions><vizData:DimensionDefinition id="_IDGenDimensionDefinition1" name="Dim" value="{view>GenericDim}"/></vizData:dimensions>
                                                                        <vizData:measures><vizData:MeasureDefinition id="_IDGenMeasureDefinition1" name="Val" value="{view>CurrentMetric}"/></vizData:measures>
                                                                    </vizData:FlattenedDataset>
                                                                </viz:dataset>
                                                                <viz:feeds>
                                                                    <vizFeeds:FeedItem id="_IDGenFeedItem3" uid="color" type="Dimension" values="Dim"/>
                                                                    <vizFeeds:FeedItem id="_IDGenFeedItem4" uid="size" type="Measure" values="Val"/>
                                                                </viz:feeds>
                                                            </viz:VizFrame>
                                                        </f:content>
                                                    </f:Card>
                                                </l:Grid>
                                            </items>
                                        </VBox>
                                    </IconTabFilter>

                                    <IconTabFilter id="_IDGenIconTabFilter2" key="geo" text="Geographical" icon="sap-icon://map" visible="{view>/isGeoReport}">
                                        <HBox id="_IDGenHBox4" width="100%" height="750px" alignItems="Start" class="sapUiMediumMarginTop">
                                            <items>
                                                <VBox id="_IDGenVBox4" width="65%" height="100%" class="mapContainerBox">
                                                    <items>
                                                        <core:HTML id="_IDGenHTML" content='&lt;div id="indiaMapContainer" class="indiaMapWrapper"&gt;&lt;/div&gt;'/>
                                                    </items>
                                                </VBox>
                                                <VBox id="_IDGenVBox5" width="35%" class="sapUiSmallMarginBegin">
                                                    <items>
                                                        <f:Card id="_IDGenCard5" class="chartCard">
                                                            <f:header><card:Header id="_IDGenHeader2" title="Regional Distribution" subtitle="Amount by Zone" iconSrc="sap-icon://choropleth-chart"/></f:header>
                                                            <f:content>
                                                                <viz:VizFrame id="geoVizFrame" vizType="bar" width="100%" height="550px">
                                                                    <viz:dataset>
                                                                        <vizData:FlattenedDataset id="_IDGenFlattenedDataset2" data="{geoData>/items}">
                                                                            <vizData:dimensions><vizData:DimensionDefinition id="_IDGenDimensionDefinition2" name="Zone" value="{geoData>Zone}"/></vizData:dimensions>
                                                                            <vizData:measures><vizData:MeasureDefinition id="_IDGenMeasureDefinition2" name="Value" value="{geoData>Value}"/></vizData:measures>
                                                                        </vizData:FlattenedDataset>
                                                                    </viz:dataset>
                                                                    <viz:feeds>
                                                                        <vizFeeds:FeedItem id="_IDGenFeedItem5" uid="valueAxis" type="Measure" values="Value"/>
                                                                        <vizFeeds:FeedItem id="_IDGenFeedItem6" uid="categoryAxis" type="Dimension" values="Zone"/>
                                                                    </viz:feeds>
                                                                </viz:VizFrame>
                                                            </f:content>
                                                        </f:Card>
                                                    </items>
                                                </VBox>
                                            </items>
                                        </HBox>
                                    </IconTabFilter>
                                </items>
                            </IconTabBar>
                        </items>
                    </VBox>
                </HBox>
            </content>
        </Page>
    </App>
</mvc:View>